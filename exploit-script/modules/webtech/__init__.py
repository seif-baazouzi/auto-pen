import webtech

from log import info, bold, item
from utils.technologies import Technologie

def webtechModule(url):
  info(bold("Collecting technologies with webtech"))

  wt = webtech.WebTech(options={ "json": True, "rua": True })
  report = wt.start_from_url(url)

  technologies = []
  for tec in report["tech"]:
    technologies.append(Technologie(tec["name"], tec["version"]))
    item(f"{tec['name']} {tec['version'] if tec['version'] else ''}")
  
  if len(technologies) == 0:
    info("Did not find any technologies")

  return technologies
