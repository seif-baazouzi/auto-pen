FROM archlinux

RUN pacman -Syu --noconfirm
RUN pacman -S --noconfirm python
RUN pacman -S --noconfirm python-pip
RUN pacman -S --noconfirm git
RUN pacman -S --noconfirm wget
RUN pacman -S --noconfirm nmap
RUN pacman -S --noconfirm sqlmap
RUN pacman -S --noconfirm firefox
RUN pacman -S --noconfirm geckodriver
RUN pacman -S --noconfirm exploitdb
RUN pacman -S --noconfirm go

# install gobuster
RUN cd /opt && git clone "https://github.com/OJ/gobuster"
RUN cd /opt/gobuster && go get && go build
RUN cd /opt/gobuster && cp gobuster /usr/bin

RUN useradd -ms /bin/bash user
USER user

WORKDIR /home/user/app/
RUN echo 'export PATH=$PATH:$HOME/.local/bin' >> ~/.bashrc

RUN pip install webtech
RUN mkdir -p /home/user/.local/share
RUN /home/user/.local/bin/webtech --update-db

COPY --chown=user:user requirements.txt /home/user/app/
RUN pip install -r requirements.txt

COPY --chown=user:user . /home/user/app/
