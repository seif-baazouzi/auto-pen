exports.id = 627;
exports.ids = [627];
exports.modules = {

/***/ 207:
/***/ ((module) => {

// Exports
module.exports = {
	"container": "PopUp_container__IRtKd",
	"close": "PopUp_close__86yD1",
	"box": "PopUp_box__AlkfF"
};


/***/ }),

/***/ 4482:
/***/ ((module) => {

// Exports
module.exports = {
	"table": "ScansList_table__ulSkh"
};


/***/ }),

/***/ 5202:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ AddScan)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_ajax__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5064);
/* harmony import */ var _utils_cookies__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1598);
/* harmony import */ var _Input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1121);
/* harmony import */ var _PopUp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1458);







function AddScan({ showState  }) {
    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)();
    const { 0: url , 1: setUrl  } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("http://172.17.0.1:8080/");
    const { 0: error , 1: setError  } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("");
    const { 0: cookies , 1: setCookies  } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("");
    const submit = async (event)=>{
        event.preventDefault();
        const { token  } = (0,_utils_cookies__WEBPACK_IMPORTED_MODULE_6__/* .parseCookies */ .B)(document.cookie);
        const res = await _utils_ajax__WEBPACK_IMPORTED_MODULE_3__/* ["default"].post */ .Z.post(`/api/v1/scans`, {
            token
        }, {
            url,
            cookies
        });
        if (res.message === "success") {
            const [_, setShow] = showState;
            router.replace(router.asPath);
            setShow(false);
        } else {
            setError(res.url);
        }
    };
    return(/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_PopUp__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
        showState: showState,
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h1", {
                children: "Add a new scan"
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form", {
                onSubmit: submit,
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Input__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
                        label: "Url",
                        type: "text",
                        error: error,
                        state: [
                            url,
                            setUrl
                        ]
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_Input__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {
                        label: "Cookies",
                        type: "text",
                        error: null,
                        state: [
                            cookies,
                            setCookies
                        ]
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                        children: "Start scan"
                    })
                ]
            })
        ]
    }));
};


/***/ }),

/***/ 1458:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ PopUp)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _styles_PopUp_module_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(207);
/* harmony import */ var _styles_PopUp_module_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_PopUp_module_css__WEBPACK_IMPORTED_MODULE_1__);


function PopUp({ children , showState  }) {
    const [show, setShow] = showState;
    if (!show) return null;
    return(/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: (_styles_PopUp_module_css__WEBPACK_IMPORTED_MODULE_1___default().container),
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: (_styles_PopUp_module_css__WEBPACK_IMPORTED_MODULE_1___default().close),
                onClick: ()=>setShow(false)
                ,
                children: "âœ–"
            }),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                className: (_styles_PopUp_module_css__WEBPACK_IMPORTED_MODULE_1___default().box),
                children: children
            })
        ]
    }));
};


/***/ }),

/***/ 6627:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ Scans),
/* harmony export */   "A": () => (/* binding */ getScans)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1853);
/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _components_AddScan__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5202);
/* harmony import */ var _components_NavBar__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8019);
/* harmony import */ var _components_ScansList__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6202);
/* harmony import */ var _utils_ajax__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(5064);
/* harmony import */ var _utils_cookies__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1598);
/* harmony import */ var _Animation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(4888);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Animation__WEBPACK_IMPORTED_MODULE_7__]);
_Animation__WEBPACK_IMPORTED_MODULE_7__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];









function Scans({ scans , running  }) {
    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)();
    const { 0: show , 1: setShow  } = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);
    const deleteScan = async (id)=>{
        const { token  } = (0,_utils_cookies__WEBPACK_IMPORTED_MODULE_8__/* .parseCookies */ .B)(document.cookie);
        await _utils_ajax__WEBPACK_IMPORTED_MODULE_6__/* ["default"].del */ .Z.del(`/api/v1/scans/${id}`, {
            token
        });
        router.replace(router.asPath);
    };
    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{
        const int = setInterval(()=>router.replace(router.asPath)
        , 10 * 1000);
        return ()=>clearInterval(int)
        ;
    }, []);
    return(/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_NavBar__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .Z, {}),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_Animation__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .Z, {
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        className: `container ${scans.length === 0 ? "center" : ""}`,
                        children: scans.length ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                                    className: "flex",
                                    children: [
                                        /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h2", {
                                            style: {
                                                flex: 2
                                            },
                                            children: [
                                                running && "Running",
                                                " Scans list"
                                            ]
                                        }),
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                            className: "float",
                                            onClick: ()=>setShow(true)
                                            ,
                                            children: "add scan"
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_ScansList__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z, {
                                    scans: scans,
                                    deleteScan: deleteScan
                                })
                            ]
                        }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h1", {
                                    className: "msg",
                                    children: running ? "All Done!" : "There is no scans yet!"
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("button", {
                                    className: "float",
                                    onClick: ()=>setShow(true)
                                    ,
                                    children: "add scan"
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_components_AddScan__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z, {
                        showState: [
                            show,
                            setShow
                        ]
                    })
                ]
            })
        ]
    }));
};
async function getScans(context, running) {
    const cookies = (0,_utils_cookies__WEBPACK_IMPORTED_MODULE_8__/* .parseCookies */ .B)(context.req.headers.cookie);
    if (!cookies.token) {
        return {
            redirect: {
                permanent: false,
                destination: "/login"
            }
        };
    }
    const res = await _utils_ajax__WEBPACK_IMPORTED_MODULE_6__/* ["default"].get */ .Z.get(`/api/v1/scans${running ? "?running" : ""}`, {
        token: cookies.token
    });
    if (res.message === "invalid-token") {
        return {
            redirect: {
                permanent: false,
                destination: "/login"
            }
        };
    }
    return {
        props: {
            scans: res.scans
        }
    };
}

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 6202:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "Z": () => (/* binding */ ScansList)
});

// EXTERNAL MODULE: external "react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(997);
// EXTERNAL MODULE: ./node_modules/next/link.js
var next_link = __webpack_require__(1664);
// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(6689);
// EXTERNAL MODULE: ./styles/ScansList.module.css
var ScansList_module = __webpack_require__(4482);
var ScansList_module_default = /*#__PURE__*/__webpack_require__.n(ScansList_module);
// EXTERNAL MODULE: ./components/PopUp.js
var PopUp = __webpack_require__(1458);
;// CONCATENATED MODULE: ./components/DeleteScan.js


function DeleteScan({ id , deleteScan , showState  }) {
    return(/*#__PURE__*/ (0,jsx_runtime_.jsxs)(PopUp/* default */.Z, {
        showState: showState,
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h4", {
                children: [
                    "Are you sure you want to delete the scan with the id ",
                    id
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "flex buttons-flex",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("button", {
                        onClick: ()=>showState[1](false)
                        ,
                        className: "float cancel",
                        children: "Cancel"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("button", {
                        onClick: ()=>{
                            deleteScan(id);
                            showState[1](false);
                        },
                        className: "float delete",
                        children: "Delete"
                    })
                ]
            })
        ]
    }));
};

;// CONCATENATED MODULE: ./components/TrashIcon.js

function TrashIcon() {
    return(/*#__PURE__*/ (0,jsx_runtime_.jsxs)("svg", {
        width: "24",
        viewBox: "0 0 24 24",
        stroke: "var(--red)",
        fill: "none",
        strokeLinecap: "round",
        strokeLinejoin: "round",
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("path", {
                stroke: "none",
                d: "M0 0h24v24H0z",
                fill: "none"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("line", {
                x1: "4",
                y1: "7",
                x2: "20",
                y2: "7"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("line", {
                x1: "10",
                y1: "11",
                x2: "10",
                y2: "17"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("line", {
                x1: "14",
                y1: "11",
                x2: "14",
                y2: "17"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("path", {
                d: "M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("path", {
                d: "M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"
            })
        ]
    }));
};

;// CONCATENATED MODULE: ./components/ScansList.js






function ScansList({ scans , deleteScan  }) {
    const { 0: selectedScanID , 1: setSelectedScanID  } = (0,external_react_.useState)();
    const { 0: show , 1: setShow  } = (0,external_react_.useState)(false);
    return(/*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        className: (ScansList_module_default()).table,
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("table", {
                children: /*#__PURE__*/ jsx_runtime_.jsx("tbody", {
                    children: scans.map(({ id , url  })=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("tr", {
                            children: [
                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                    children: /*#__PURE__*/ jsx_runtime_.jsx(next_link["default"], {
                                        href: `/scans/${id}`,
                                        prefetch: true,
                                        children: id
                                    })
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                    children: url
                                }),
                                /*#__PURE__*/ jsx_runtime_.jsx("td", {
                                    children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: "flex",
                                        onClick: ()=>{
                                            setSelectedScanID(id);
                                            setShow(true);
                                        },
                                        children: /*#__PURE__*/ jsx_runtime_.jsx(TrashIcon, {
                                            size: "1rem",
                                            color: "var(--error)"
                                        })
                                    })
                                })
                            ]
                        }, id)
                    )
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx(DeleteScan, {
                id: selectedScanID,
                deleteScan: deleteScan,
                showState: [
                    show,
                    setShow
                ]
            })
        ]
    }));
};


/***/ })

};
;