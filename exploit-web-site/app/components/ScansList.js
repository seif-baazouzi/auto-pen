import Link from "next/link";
import { useState } from "react";
import styles from "../styles/ScansList.module.css";
import DeleteScan from "./DeleteScan";
import TrashIcon from "./TrashIcon";

export default function ScansList({ scans, deleteScan }) {
  const [selectedScanID, setSelectedScanID] = useState()
  const [show, setShow] = useState(false)

  return (
    <div className={styles.table}>
      <table>
        <tbody>
        {scans.map(({ id, url }) => (
          <tr key={id}>
            <td><Link href={`/scans/${id}`} prefetch={true}>{id}</Link></td>
            <td>{url}</td>
            <td>
              <div
                className="flex"
                onClick={() => { setSelectedScanID(id); setShow(true) }}
                ><TrashIcon size="1rem" color="var(--error)" />
              </div>
            </td>
          </tr>
        ))}
        </tbody>
      </table>

      <DeleteScan
        id={selectedScanID}
        deleteScan={deleteScan}
        showState={[show, setShow]}
      />
    </div>
  ) 
}
