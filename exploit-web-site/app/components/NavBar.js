import Router, { useRouter } from "next/router";
import { useState } from "react";
import styles from "../styles/Nav.module.css";
import { clearCookies } from "../utils/cookies";

export default function NavBar() {
  const router = useRouter()
  const [hide, setHide] = useState(true)

  const logout = (event) => {
    event.preventDefault()
    clearCookies()
    Router.push("/login")
  }
  
  const goto = (event, url) => {
    event.preventDefault()
    setHide(true)
    Router.push(url)
  }
  
  const linksList = [
    { path: "/", desc: "Home" },
    { path: "/running-scans", desc: "Running Scans" },
  ]
  
  return (
    <nav className={styles.nav}>
      <div className={styles.container}>
        <a
          onClick={e => goto(e, "/")}
          className={styles.logo}
          >AutoPen
          <span className={styles.pipe}>|</span>
          <span className={styles.word}>exploit</span>
        </a>
        <ul className={hide ? styles.hide : ""}>
          {linksList.map(({ path, desc }) => (
            <li key={path}>
              <a
                onClick={e => goto(e, path)}
                className={`${router.pathname == path ? styles.active : ""}`}
                >{desc}
              </a>
            </li>
          ))}
          <li>
          <button className={styles.btn} onClick={logout}>Logout</button>
          </li>
        </ul>
        
        <div className={`${styles.burger} ${!hide ? "x" : ""}`} onClick={() => setHide(h => !h)}>
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
    </nav>
  )
}
